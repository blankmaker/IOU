"use strict";angular.module("splitsiesApp",["ngAnimate","ngResource","ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/split",{templateUrl:"views/split.html",controller:"SplitCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("splitsiesApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("splitsiesApp").controller("SplitCtrl",["$scope","Split",function(a,b){a.result,a.splitters=b.splitters,a.addSplitter=function(c){b.addSplitter(c),a.splitter=null},a.lineItems=b.lineItems,a.addLineItem=function(c,d,e){b.addLineItem(c,d,e),a.item=null,a.cost=null,a.whoPaid=null},a.showAlert=!1,a.calculate=function(){a.result=b.calculate(),a.showAlert=!0}}]),angular.module("splitsiesApp").factory("Split",function(){var a=0,b=0,c={},d=0,e=function(a){c[a]={name:a,contributed:0,owes:0},d++},f=[],g=function(e,g,h){if(c[h]){var i={item:e,cost:g,whoPaid:h};a+=g,b=Math.floor(a/d*100)/100,c[h].contributed+=g,f.push(i)}else alert(h+" is not in your split group. Please re-enter your line item with a valid splitter.")},h=function(){var d={toPay:[],toGet:[],actions:[],total:a,costPP:b};for(var e in c)c[e].owes-=c[e].contributed-b,c[e].owes>0?d.toPay.push(c[e]):d.toGet.push(c[e]);d.toPay.sort(function(a,b){return b.owes-a.owes}),d.toGet.sort(function(a,b){return b.owes-a.owes});var f=function(a,b){a.forEach(function(a){for(;a.owes>0;)b.forEach(function(b){a.owes>=Math.abs(b.owes)&&b.owes<0?(d.actions.push({payer:a.name,recipient:b.name,howMuch:Math.abs(b.owes)}),a.owes+=b.owes,b.owes=0):a.owes<Math.abs(b.owes)&&b.owes<0&&(d.actions.push({payer:a.name,recipient:b.name,howMuch:a.owes}),b.owes+=a.owes,a.owes=0)})})};return f(d.toPay,d.toGet),console.log(d),d};return{splitters:c,addSplitter:e,lineItems:f,addLineItem:g,costPP:b,totals:function(){return console.log(a),a},calculate:h}});